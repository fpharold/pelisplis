<script>
  const peliId = "Sonic3"; // Identificador único de la película

  function getFavs() {
    return JSON.parse(localStorage.getItem('favoritos') || "[]");
  }

  function saveFavs(favs) {
    localStorage.setItem('favoritos', JSON.stringify(favs));
  }

  function updateFavBtn() {
    const favs = getFavs();
    const btn = document.getElementById('favBtn');
    const text = document.getElementById('favText');
    if (favs.includes(peliId)) {
      btn.innerHTML = "&#9733; <span id='favText'>Favorito</span>";
      btn.title = "Quitar de favoritos";
    } else {
      btn.innerHTML = "&#9734; <span id='favText'>Agregar a favoritos</span>";
      btn.title = "Agregar a favoritos";
    }
    // Vuelve a agregar el event listener después de cambiar innerHTML
    btn.onclick = function() {
      let favs = getFavs();
      if (favs.includes(peliId)) {
        favs = favs.filter(id => id !== peliId);
      } else {
        favs.push(peliId);
      }
      saveFavs(favs);
      updateFavBtn();
    };
  }

  // Inicializa el botón al cargar la página
  document.addEventListener('DOMContentLoaded', updateFavBtn);
</script>
